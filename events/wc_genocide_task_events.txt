namespace = genocide_task

genocide_task.0301 = {
    type = character_event
    title = genocide_task.0301.t
    desc = genocide_task.0301.desc
    theme = martial
     left_portrait = {
        character = cp:councillor_court_chaplain
        animation = personality_zealous
    }

    right_portrait = {
        character = scope:councillor_liege
        animation = throne_room_kneel_1
    }

    lower_center_portrait = {
        character = scope:councillor
    }

    trigger = {
        can_corrupt_trigger = yes
        exists = cp:councillor_marshal
        scope:councillor = cp:councillor_marshal
        scope:councillor ?= {
            martial > high_skill_rating
        }
        cp:councillor_court_chaplain ?= {
            learning > mediocre_skill_rating
        }
    }

    weight_multiplier = {
        base = 1
        compare_modifier = {
            target = scope:councillor
            value = martial
            multiplier = 0.15
            offset = inverted_high_skill_rating
        }
        compare_modifier = {
            target = cp:councillor_court_chaplain
            value = learning
            multiplier = 0.05
            offset = inverted_mediocre_skill_rating
        }
    }

    immediate = {
        set_variable = {
            name = had_genocide_task_side_effect
            value = yes
            days = genocide_task_side_effect_cooldown
        }
    }

    option = {
        name = genocide_task.0301.a

        add_dread = major_dread_gain

        stress_impact = {
            forgiving = major_dread_gain
            just = major_dread_gain
            generous = major_dread_gain
            compassionate = major_dread_gain
        }

        ai_chance = {
            base = 50

            modifier = {
                OR = {
                    has_trait = forgiving
                    has_trait = just
                    has_trait = generous
                    has_trait = compassionate
                }
                add = -25
            }
        }
    }

    option = {
        name = genocide_task.0301.b

        add_piety = 100

        stress_impact = {
            zealous = minor_dread_gain
            sadistic = minor_dread_gain
            callous = minor_dread_gain
        }

        ai_chance = {
            base = 50

            modifier = {
                OR = {
                    has_trait = zealous
                    has_trait = sadistic
                    has_trait = callous
                }
                add = -25
            }
        }
    }

    option = {
        name = genocide_task.0301.c

        trigger = {
            OR = {
                has_trait = magic_good
                has_trait = magic_good_noninheritable
            }
        }

        add_dread = medium_dread_gain
        add_piety = minor_piety_value
        add_character_modifier = {
            modifier = harmonize_with_force
            days = 100
        }
    }
}