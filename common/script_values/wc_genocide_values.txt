council_same_culture_impact_percentage = 50
council_same_faith_impact_percentage = 50

marshal_purge_population_current_progress = { 
	value = 0
	if = {
		limit = { 
			scope:county ?= { 
				has_variable = purge_population_current_progress
			} 
		}
		add = scope:county.var:purge_population_current_progress
	}
}

marshal_purge_population_base_total = { 
	value = 1
}

marshal_purge_population_monthly_increase_friend_bonus = {
	if = {
		limit = {
			scope:councillor_liege = {
				has_relation_friend = scope:councillor
				NOT = { has_relation_best_friend = scope:councillor }
			}
		}
		add = {
			value = marshal_purge_population_base_total
			multiply = {
				value = council_friend_impact_percentage
				divide = 100
			}
		}
	}
}
marshal_purge_population_monthly_increase_best_friend_bonus = {
	if = {
		limit = {
			scope:councillor_liege = {
				has_relation_best_friend = scope:councillor
			}
		}
		add = {
			value = marshal_purge_population_base_total
			multiply = {
				value = council_best_friend_impact_percentage
				divide = 100
			}
		}
	}
}
marshal_purge_population_monthly_increase_rival_bonus = {
	if = {
		limit = {
			scope:councillor_liege = {
				has_relation_rival = scope:councillor
				NOT = { has_relation_nemesis = scope:councillor }
			}
		}
		add = {
			value = marshal_purge_population_base_total
			multiply = {
				value = council_rival_impact_percentage
				divide = 100
			}
		}
	}
}
marshal_purge_population_monthly_increase_nemesis_bonus = {
	if = {
		limit = {
			scope:councillor_liege = {
				has_relation_nemesis = scope:councillor
			}
		}
		add = {
			value = marshal_purge_population_base_total
			multiply = {
				value = council_nemesis_impact_percentage
				divide = 100
			}
		}
	}
}
marshal_purge_population_monthly_increase_same_culture_bonus = { 
	if = {
		limit = {
			scope:county = {
				culture = scope:councillor_liege.culture
			}
		}
		add = {
			value = marshal_purge_population_base_total
			multiply = {
				value = council_same_culture_impact_percentage
				divide = 100
			}
		}
	}
}
marshal_purge_population_monthly_increase_same_faith_bonus = { 
	if = {
		limit = {
			scope:county = {
				faith = scope:councillor_liege.faith
			}
		}
		add = {
			value = marshal_purge_population_base_total
			multiply = {
				value = council_same_faith_impact_percentage
				divide = 100
			}
		}
	}
}
marshal_purge_population_total = { 
	value = marshal_purge_population_base_total
	add = marshal_purge_population_monthly_increase_friend_bonus
	add = marshal_purge_population_monthly_increase_best_friend_bonus
	add = marshal_purge_population_monthly_increase_rival_bonus
	add = marshal_purge_population_monthly_increase_nemesis_bonus
	add = marshal_purge_population_monthly_increase_same_culture_bonus
	add = marshal_purge_population_monthly_increase_same_faith_bonus
}

genocide_cb_prestige_cost = {
	value = 0
	scope:defender = {
		every_realm_county = {
			limit = {
				OR = {
					AND = {
						has_variable = culture_genocided
						var:culture_genocided = scope:attacker.culture
					}
				}
			}

			add = 100
		}
	}
}

genocide_cb_piety_cost = {
	value = 0
	scope:defender = {
		every_realm_county = {
			limit = {
				OR = {
					AND = {
						has_variable = faith_genocided
						var:faith_genocided = scope:attacker.faith
					}
				}
			}

			add = 100
		}
	}
}

genocide_cb_participation_prestige = {
	value = scope:base_prestige
	multiply = 0.5
	multiply = {
		value = 0
		if = {
			limit = {
				scope:attacker_culture_reward_mult > scope:defender_culture_reward_mult
			}
			add = scope:attacker_culture_reward_mult
		}
		else = {
			add = scope:defender_culture_reward_mult
		}
	}
}

genocide_cb_participation_piety = {
	value = scope:base_piety
	multiply = 0.5
	multiply = {
		value = 0
		if = {
			limit = {
				scope:attacker_faith_reward_mult > scope:defender_faith_reward_mult
			}
			add = scope:attacker_faith_reward_mult
		}
		else = {
			add = scope:defender_faith_reward_mult
		}
	}
}